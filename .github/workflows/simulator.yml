name: Tech Data Simulator
on:
  schedule:
    # Every 1 day
    - cron: "*/60*24 * * * *"
  workflow_dispatch: # Allow manual trigger
jobs:
  simulate:
    runs-on: ubuntu-latest
    steps:
      # Step 1: Checkout repo
      - uses: actions/checkout@v4
      # Step 2: Setup Python
      - uses: actions/setup-python@v5
        with:
          python-version: "3.14"
      # Step 3: Install dependencies
      - run: pip install -r tech-simulator/requirements.txt
      # Step 4: Run the Python script with environment variable
      - name: Run sales simulator
        env:
          GCP_SERVICE_ACCOUNT: ${{ secrets.GCP_SERVICE_ACCOUNT }}
        run: python tech-simulator/run_sales.py
